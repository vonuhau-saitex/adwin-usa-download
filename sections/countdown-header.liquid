{{- 'countdown-header.css' | asset_url | stylesheet_tag -}}

{%- liquid
  assign countdown_date = section.settings.countdown_date
  assign countdown_time = section.settings.countdown_time
  assign countdown_timezone = section.settings.countdown_timezone
  assign countdown_message = section.settings.countdown_message
  assign show_seconds = section.settings.show_seconds
  assign countdown_bg_color = section.settings.countdown_bg_color
  assign countdown_text_color = section.settings.countdown_text_color
  assign button_text = section.settings.button_text
  assign button_url = section.settings.button_url
  assign button_bg_color = section.settings.button_bg_color
  assign button_text_color = section.settings.button_text_color
  assign button_border_radius = section.settings.button_border_radius
-%}

{%- if countdown_date != blank -%}
<style>
  .countdown-header-standalone {
    --countdown-bg: {{ countdown_bg_color | default: '#ffffff' }};
    --countdown-text: {{ countdown_text_color | default: '#000000' }};
    --header-countdown-button-bg: {{ button_bg_color | default: '#000000' }};
    --header-countdown-button-text: {{ button_text_color | default: '#ffffff' }};
    --header-countdown-border-button-radius: {{ button_border_radius | default: 6 }}px;
  }
</style>

<div class="countdown-header-standalone">
  <div class="countdown-header-content">
    <div class="countdown-content-wrapper">      
      <div class="countdown-main-content">
        {%- if countdown_message != blank -%}
          <div class="countdown-message">
            {{ countdown_message }}
          </div>
        {%- endif -%}
        
        <div class="countdown-timer-wrapper">
          <countdown-timer 
            class="countdown-timer-header"
            data-date="{{ countdown_date | date: '%d-%m-%Y' }}"
            data-time="{{ countdown_time | default: '23:59' }}"
            data-timezone="{{ countdown_timezone | default: '+00:00' }}"
            data-show-seconds="{{ show_seconds }}">
            <div class="countdown-timer-display">
              <div class="countdown-item">
                <div class="countdown-number days">
                  <span class="countdown-timer--column--number">00</span>
                </div>
                <div class="countdown-label">Days</div>
              </div>
              <div class="countdown-separator">:</div>
              <div class="countdown-item">
                <div class="countdown-number hours">
                  <span class="countdown-timer--column--number">00</span>
                </div>
                <div class="countdown-label">Hours</div>
              </div>
              <div class="countdown-separator">:</div>
              <div class="countdown-item">
                <div class="countdown-number minutes">
                  <span class="countdown-timer--column--number">00</span>
                </div>
                <div class="countdown-label">Minutes</div>
              </div>
              {%- if show_seconds -%}
                <div class="countdown-separator">:</div>
                <div class="countdown-item">
                  <div class="countdown-number seconds">
                    <span class="countdown-timer--column--number">00</span>
                  </div>
                  <div class="countdown-label">Seconds</div>
                </div>
              {%- endif -%}
            </div>
          </countdown-timer>
          
          {%- if button_text != blank -%}
            <a href="{{ button_url | default: '#' }}" class="countdown-button">
              {{ button_text }}
            </a>
          {%- endif -%}
        </div>
      </div>
    </div>
  </div>
</div>

<script src="{{ 'countdown-header.js' | asset_url }}" defer="defer"></script>
{%- endif -%}

{% schema %}
{
  "name": "Countdown Header",
  "tag": "section",
  "class": "countdown-header-section",
  "settings": [
    {
      "type": "header",
      "content": "Countdown Settings"
    },
    {
      "type": "text",
      "id": "countdown_date",
      "label": "Countdown Date",
      "info": "Format: YYYY-MM-DD (e.g., 2025-12-31)",
      "default": "2025-12-31"
    },
    {
      "type": "text",
      "id": "countdown_time",
      "label": "Countdown Time (24-hour format)",
      "info": "Format: HH:MM (e.g., 23:59)",
      "default": "23:59"
    },
    {
      "type": "select",
      "id": "countdown_timezone",
      "label": "UTC Timezone",
      "options": [
        {
          "value": "-12:00",
          "label": "UTC-12:00 (Baker Island)"
        },
        {
          "value": "-11:00",
          "label": "UTC-11:00 (American Samoa)"
        },
        {
          "value": "-10:00",
          "label": "UTC-10:00 (Hawaii - HST)"
        },
        {
          "value": "-09:00",
          "label": "UTC-09:00 (Alaska - AKST)"
        },
        {
          "value": "-08:00",
          "label": "UTC-08:00 (Pacific - PST/Los Angeles)"
        },
        {
          "value": "-07:00",
          "label": "UTC-07:00 (Mountain - MST/Denver)"
        },
        {
          "value": "-06:00",
          "label": "UTC-06:00 (Central - CST/Chicago)"
        },
        {
          "value": "-05:00",
          "label": "UTC-05:00 (Eastern - EST/New York)"
        },
        {
          "value": "-04:00",
          "label": "UTC-04:00 (Atlantic Time)"
        },
        {
          "value": "-03:00",
          "label": "UTC-03:00 (Argentina)"
        },
        {
          "value": "-02:00",
          "label": "UTC-02:00 (South Georgia)"
        },
        {
          "value": "-01:00",
          "label": "UTC-01:00 (Azores)"
        },
        {
          "value": "+00:00",
          "label": "UTC+00:00 (London/GMT)"
        },
        {
          "value": "+01:00",
          "label": "UTC+01:00 (Paris/Berlin)"
        },
        {
          "value": "+02:00",
          "label": "UTC+02:00 (Cairo/Athens)"
        },
        {
          "value": "+03:00",
          "label": "UTC+03:00 (Moscow)"
        },
        {
          "value": "+04:00",
          "label": "UTC+04:00 (Dubai)"
        },
        {
          "value": "+05:00",
          "label": "UTC+05:00 (Pakistan)"
        },
        {
          "value": "+05:30",
          "label": "UTC+05:30 (India)"
        },
        {
          "value": "+06:00",
          "label": "UTC+06:00 (Bangladesh)"
        },
        {
          "value": "+07:00",
          "label": "UTC+07:00 (Thailand)"
        },
        {
          "value": "+08:00",
          "label": "UTC+08:00 (China/Singapore)"
        },
        {
          "value": "+09:00",
          "label": "UTC+09:00 (Japan/Korea)"
        },
        {
          "value": "+10:00",
          "label": "UTC+10:00 (Australia East)"
        },
        {
          "value": "+11:00",
          "label": "UTC+11:00 (Solomon Islands)"
        },
        {
          "value": "+12:00",
          "label": "UTC+12:00 (New Zealand)"
        }
      ],
      "default": "-05:00"
    },
    {
      "type": "checkbox",
      "id": "show_seconds",
      "label": "Show Seconds",
      "info": "Display seconds in the countdown timer",
      "default": true
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "countdown_message",
      "label": "Countdown Message",
      "info": "Text that appears next to the countdown timer",
      "default": "Time is ticking"
    },
    {
      "type": "header",
      "content": "Button Settings"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "SHOP NOW"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "Button URL",
      "default": "/collections/all"
    },
    {
      "type": "range",
      "id": "button_border_radius",
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px",
      "label": "Button Border Radius",
      "default": 6
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "countdown_bg_color",
      "label": "Background Color",
      "default": "#ffffffff"
    },
    {
      "type": "color",
      "id": "countdown_text_color",
      "label": "Text Color",
      "default": "#000000ff"
    },
    {
      "type": "color",
      "id": "button_bg_color",
      "label": "Button Background Color",
      "default": "#000000ff"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button Text Color",
      "default": "#ffffffff"
    }
  ],
  "presets": [
    {
      "name": "Countdown Header",
      "settings": {
        "countdown_date": "2025-12-31",
        "countdown_time": "23:59",
        "countdown_timezone": "-05:00",
        "show_seconds": true,
        "countdown_message": "Time is ticking",
        "button_text": "SHOP NOW",
        "button_url": "/collections/all",
        "countdown_bg_color": "#000000",
        "countdown_text_color": "#ffffff",
        "button_bg_color": "#ff0000",
        "button_text_color": "#ffffff",
        "button_border_radius": 6
      }
    }
  ]
}
{% endschema %}
