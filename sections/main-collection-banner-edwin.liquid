{{- 'collection-banner-edwin.css' | asset_url | stylesheet_tag -}}

{%- liquid
  assign section_heading = section.settings.heading
  assign full_width = section.settings.full_width
  assign disable_top_spacing = section.settings.disable_top_spacing
  assign disable_bottom_spacing = section.settings.disable_bottom_spacing
-%}

<div class="collection-banner-edwin section-spacing{% if disable_top_spacing %} section-spacing--disable-top{% endif %}{% if disable_bottom_spacing %} section-spacing--disable-bottom{% endif %}">
  <div class="collection-banner--breadcrumbs">
    {%- render 'breadcrumbs' -%}
  </div>
  <div class="row{% if full_width %} full-width-row{% endif %}">
    <div class="small-12 columns">
      {% render 'section-header', section_heading: section_heading %}
      <!--
        <div class="collection-banner-edwin__top-container">
          <h3 class="collection-banner-edwin__top-title">{{ collection.title }}</h3>
        </div>
      -->
      <div class="collection-banner-edwin__main-container row full-width-row no-padding">
        <div class="collection-banner-edwin__left_container small-12 medium-6 columns">
          <div class="collection-banner-edwin__main-title">
            <h1>
            {% if collection.title == 'Products' %}
              All Categories
            {%  else %}
            {{ collection.title }}
            {%  endif %}
            </h1>
          </div>
          <div class="collection-banner-edwin__product-count hidden">
            {% if collection.template_suffix == 'jeans' %}
              {% assign sum_prodsub = 0 %}
              {% for sub_collection in collection.metafields.custom.sub_collections.value %}
                <span class="hidden">{{ sub_collection.title }} has {{ sub_collection.products_count }}</span>
                {% assign sum_prodsub = sum_prodsub | plus: sub_collection.products_count %}
              {% endfor %}
              {{ sum_prodsub }} products
            {% else %}
              {{ collection.products_count }} products
            {% endif %}
          </div>
        </div>
        <div class="collection-banner-edwin__right_container small-12 medium-6 columns">
          {{ collection.description }}
        </div>
      </div>
    </div>    
  </div>

  {% assign list_collections = collection.metafields.custom.sub_collections.value %}
  {% if list_collections != blank %}
    <div class="collection-list-wrapper row{% if full_width %} full-width-row{% endif %}">
      <div class="small-12 columns">
        <div class="collection-list">
          <ul>
            {% for link in collection.metafields.custom.sub_collections.value %}
              <li
                class="{% if link.url == collection.url %} active{% endif %}"
              >
                <a
                  href="{{ link.url }}"
                  title="{{ link.title | escape }}"
                  {%- if link.active %}
                    aria-current="page"
                  {% endif -%}
                >
                  {{- link.title -}}
                </a>
              </li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>
  {% endif %}
</div>

{% schema %}
{
  "name": "Collection banner EDWIN",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Collection banner EDWIN"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "Make section full width",
      "default": true
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "checkbox",
      "id": "disable_top_spacing",
      "default": false,
      "label": "Remove top spacing"
    },
    {
      "type": "checkbox",
      "id": "disable_bottom_spacing",
      "default": false,
      "label": "Remove bottom spacing"
    }
  ],
  "presets": [
    {
      "name": "Collection banner EDWIN",
      "category": "EDWIN CUSTOMIZATION"
    }
  ]
}
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}
